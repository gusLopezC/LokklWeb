function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{t260:function(t,e,r){"use strict";r.r(e);var n,a,i,o,c=r("sYmb"),s=r("ofXK"),l=r("fXoL"),b=r("XNiG"),d=["payPalButtonContainer"],u=((o=function(){function t(e){_classCallCheck(this,t),this.zone=e}return _createClass(t,[{key:"registerScript",value:function(t,e,r){var n=this,a=window[e];if(a)this.zone.run((function(){r(a)}));else{var i=document.createElement("script");i.id=this.getElemId(e),i.innerHTML="",i.onload=function(){n.zone.run((function(){r(window[e])}))},i.src=t,i.async=!0,i.defer=!0,document.getElementsByTagName("head")[0].appendChild(i)}}},{key:"cleanup",value:function(t){var e=document.getElementById(this.getElemId(t));e&&e.remove()}},{key:"getElemId",value:function(t){return"ngx-paypal-script-elem-".concat(t)}}]),t}()).\u0275fac=function(t){return new(t||o)(l.hc(l.z))},o.\u0275prov=l.Pb({token:o,factory:o.\u0275fac}),o),p=((i=function(){function t(e){_classCallCheck(this,t),this.scriptService=e,this.paypalWindowName="paypal"}return _createClass(t,[{key:"registerPayPalScript",value:function(t,e){this.scriptService.registerScript(this.getUrlForConfig(t),this.paypalWindowName,e)}},{key:"destroyPayPalScript",value:function(){this.scriptService.cleanup(this.paypalWindowName)}},{key:"getUrlForConfig",value:function(t){var e=[{name:"client-id",value:t.clientId}];return t.currency&&e.push({name:"currency",value:t.currency}),t.commit&&e.push({name:"commit",value:t.commit}),t.extraParams&&e.push.apply(e,_toConsumableArray(t.extraParams)),"https://www.paypal.com/sdk/js".concat(this.getQueryString(e))}},{key:"getQueryString",value:function(t){for(var e="",r=0;r<t.length;r++){var n=t[r];e+=0===r?"?":"&",e+="".concat(n.name,"=").concat(n.value)}return e}}]),t}()).\u0275fac=function(t){return new(t||i)(l.hc(u))},i.\u0275prov=l.Pb({token:i,factory:i.\u0275fac}),i),m=((a=function(){function t(e,r,n){_classCallCheck(this,t),this.paypalScriptService=e,this.cdr=r,this.ngZone=n,this.registerScript=!0,this.scriptLoaded=new l.n,this.ngUnsubscribe=new b.a,this.initializePayPal=!0}return _createClass(t,[{key:"ngOnChanges",value:function(t){var e=this;this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());var r=this.config;t.config.isFirstChange()&&r&&this.registerScript&&this.initPayPalScript(r,(function(t){e.payPal=t,e.doPayPalCheck()})),t.config.isFirstChange()||this.reinitialize(r)}},{key:"ngOnDestroy",value:function(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"ngAfterViewInit",value:function(){this.doPayPalCheck()}},{key:"customInit",value:function(t){this.payPal=t,this.doPayPalCheck()}},{key:"reinitialize",value:function(t){var e=this;if(this.config=t,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,(function(t){e.payPal=t,e.doPayPalCheck()})))}},{key:"doPayPalCheck",value:function(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}},{key:"initPayPalScript",value:function(t,e){var r=this;this.paypalScriptService.registerPayPalScript({clientId:t.clientId,commit:t.advanced&&t.advanced.commit?t.advanced.commit:void 0,currency:t.currency,extraParams:t.advanced&&t.advanced.extraQueryParams?t.advanced.extraQueryParams:[]},(function(t){r.scriptLoaded.next(t),e(t)}))}},{key:"generateElementId",value:function(){return"ngx-captcha-id-".concat((new Date).valueOf())}},{key:"initPayPal",value:function(t,e){var r=this;this.ngZone.runOutsideAngular((function(){e.Buttons({style:t.style,createOrder:function(e,n){return r.ngZone.run((function(){if(t.createOrderOnClient&&t.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                        Please choose one or the other.");if(!t.createOrderOnClient&&!t.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                        Please define one of these to create order.");if(t.createOrderOnClient)return n.order.create(t.createOrderOnClient(e));if(t.createOrderOnServer)return t.createOrderOnServer(e);throw Error("Invalid state for 'createOrder'.")}))},onApprove:function(e,n){return r.ngZone.run((function(){if(t.onApprove&&t.onApprove(e,n),t.authorizeOnServer)return t.authorizeOnServer(e,n);var a=t.onClientAuthorization;a&&n.order.capture().then((function(t){r.ngZone.run((function(){a(t)}))}))}))},onError:function(e){r.ngZone.run((function(){t.onError&&t.onError(e)}))},onCancel:function(e,n){r.ngZone.run((function(){t.onCancel&&t.onCancel(e,n)}))},onShippingChange:function(e,n){return r.ngZone.run((function(){if(t.onShippingChange)return t.onShippingChange(e,n)}))},onClick:function(e,n){r.ngZone.run((function(){t.onClick&&t.onClick(e,n)}))},onInit:function(e,n){r.ngZone.run((function(){t.onInit&&t.onInit(e,n)}))}}).render("#".concat(r.payPalButtonContainerId))}))}},{key:"payPalButtonContainer",set:function(t){this.payPalButtonContainerElem=t}}]),t}()).\u0275fac=function(t){return new(t||a)(l.Tb(p),l.Tb(l.h),l.Tb(l.z))},a.\u0275cmp=l.Nb({type:a,selectors:[["ngx-paypal"]],viewQuery:function(t,e){var r;1&t&&l.ed(d,!0),2&t&&l.Kc(r=l.mc())&&(e.payPalButtonContainer=r.first)},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[l.Bb()],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(t,e){1&t&&l.Ub(0,"div",0,1),2&t&&l.yc("id",e.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),a),v=((n=function t(){_classCallCheck(this,t)}).\u0275mod=l.Rb({type:n}),n.\u0275inj=l.Qb({factory:function(t){return new(t||n)},providers:[u,p],imports:[[s.c]]}),n),f=r("3Pt+"),h=r("vWu4"),g=r("tyNb"),y=r("mrSG"),Z=r("PSD3"),Y=r.n(Z),P=r("IN2z"),C=r("cjUu");function w(t,e){1&t&&(l.Zb(0,"div"),l.Ub(1,"app-spineer"),l.Yb())}function S(t,e){1&t&&(l.Zb(0,"div"),l.Zc(1),l.qc(2,"translate"),l.Yb()),2&t&&(l.Db(1),l.bd(" ",l.rc(2,1,"tour.Namerequired"),""))}function _(t,e){if(1&t&&(l.Zb(0,"div",73),l.Xc(1,S,3,3,"div",0),l.Yb()),2&t){var r=l.pc(5);l.Db(1),l.yc("ngIf",r.customStripeForm.controls.name_card.errors.required)}}function k(t,e){1&t&&(l.Zb(0,"div"),l.Zc(1),l.qc(2,"translate"),l.Yb()),2&t&&(l.Db(1),l.bd(" ",l.rc(2,1,"tour.Cardrequired"),""))}function x(t,e){if(1&t&&(l.Zb(0,"div",73),l.Xc(1,k,3,3,"div",0),l.Yb()),2&t){var r=l.pc(5);l.Db(1),l.yc("ngIf",r.customStripeForm.controls.cardNumber.errors.required)}}function D(t,e){1&t&&(l.Zb(0,"div"),l.Zc(1),l.qc(2,"translate"),l.Yb()),2&t&&(l.Db(1),l.bd(" ",l.rc(2,1,"tour.Monthrequired"),""))}function q(t,e){if(1&t&&(l.Zb(0,"div",73),l.Xc(1,D,3,3,"div",0),l.Yb()),2&t){var r=l.pc(5);l.Db(1),l.yc("ngIf",r.customStripeForm.controls.expMonth.errors.required)}}function I(t,e){1&t&&(l.Zb(0,"div"),l.Zc(1),l.qc(2,"translate"),l.Yb()),2&t&&(l.Db(1),l.bd(" ",l.rc(2,1,"tour.Yearrequired"),""))}function O(t,e){if(1&t&&(l.Zb(0,"div",73),l.Xc(1,I,3,3,"div",0),l.Yb()),2&t){var r=l.pc(5);l.Db(1),l.yc("ngIf",r.customStripeForm.controls.expYear.errors.required)}}function U(t,e){1&t&&(l.Zb(0,"div"),l.Zc(1),l.qc(2,"translate"),l.Yb()),2&t&&(l.Db(1),l.bd(" ",l.rc(2,1,"tour.CCVrequired"),""))}function A(t,e){1&t&&(l.Zb(0,"div"),l.Zc(1),l.qc(2,"translate"),l.Yb()),2&t&&(l.Db(1),l.bd(" ",l.rc(2,1,"tour.CCVleast"),""))}function N(t,e){if(1&t&&(l.Zb(0,"div",73),l.Xc(1,U,3,3,"div",0),l.Xc(2,A,3,3,"div",0),l.Yb()),2&t){var r=l.pc(5);l.Db(1),l.yc("ngIf",r.customStripeForm.controls.ccv.errors.required),l.Db(1),l.yc("ngIf",r.customStripeForm.controls.ccv.errors.minlength)}}function T(t,e){if(1&t&&(l.Zb(0,"div",21),l.Zb(1,"div",58),l.Zb(2,"div",23),l.Zb(3,"label"),l.Zc(4),l.qc(5,"translate"),l.Yb(),l.Ub(6,"input",59),l.Xc(7,_,2,1,"div",60),l.Yb(),l.Zb(8,"div",17),l.Zb(9,"div",61),l.Zb(10,"div",23),l.Zb(11,"label"),l.Zc(12),l.qc(13,"translate"),l.Yb(),l.Ub(14,"input",62),l.Yb(),l.Yb(),l.Zb(15,"div",61),l.Ub(16,"img",63),l.Yb(),l.Zb(17,"div",61),l.Xc(18,x,2,1,"div",60),l.Yb(),l.Yb(),l.Zb(19,"div",17),l.Zb(20,"div",64),l.Zb(21,"label"),l.Zc(22),l.qc(23,"translate"),l.Yb(),l.Zb(24,"div",17),l.Zb(25,"div",64),l.Zb(26,"div",23),l.Ub(27,"input",65),l.Yb(),l.Yb(),l.Zb(28,"div",64),l.Zb(29,"div",23),l.Ub(30,"input",66),l.Yb(),l.Yb(),l.Yb(),l.Zb(31,"div",67),l.Xc(32,q,2,1,"div",60),l.Xc(33,O,2,1,"div",60),l.Yb(),l.Yb(),l.Zb(34,"div",64),l.Zb(35,"div",23),l.Zb(36,"label"),l.Zc(37),l.qc(38,"translate"),l.Yb(),l.Zb(39,"div",17),l.Zb(40,"div",68),l.Zb(41,"div",23),l.Ub(42,"input",69),l.Yb(),l.Yb(),l.Zb(43,"div",70),l.Ub(44,"img",71),l.Zb(45,"small"),l.Zc(46),l.qc(47,"translate"),l.Yb(),l.Yb(),l.Zb(48,"div",72),l.Xc(49,N,3,2,"div",60),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb()),2&t){var r=l.pc(4);l.Db(4),l.ad(l.rc(5,10,"tour.Nameoncard")),l.Db(3),l.yc("ngIf",r.submitted&&r.customStripeForm.controls.name_card.errors),l.Db(5),l.ad(l.rc(13,12,"tour.Cardnumber")),l.Db(6),l.yc("ngIf",r.submitted&&r.customStripeForm.controls.cardNumber.errors),l.Db(4),l.ad(l.rc(23,14,"tour.Expirationdate")),l.Db(10),l.yc("ngIf",r.submitted&&r.customStripeForm.controls.expMonth.errors),l.Db(1),l.yc("ngIf",r.submitted&&r.customStripeForm.controls.expYear.errors),l.Db(4),l.ad(l.rc(38,16,"tour.Securitycode")),l.Db(9),l.ad(l.rc(47,18,"tour.Lastdigits")),l.Db(3),l.yc("ngIf",r.submitted&&r.customStripeForm.controls.ccv.errors)}}function z(t,e){1&t&&(l.Ub(0,"input",76),l.qc(1,"translate")),2&t&&l.zc("value",l.rc(1,1,"tour.Reservar"))}function E(t,e){1&t&&(l.Zb(0,"span",77),l.Zc(1,"Processing please wait..."),l.Yb())}function M(t,e){if(1&t&&(l.Zb(0,"div"),l.Xc(1,z,2,3,"input",74),l.Xc(2,E,2,0,"span",75),l.Yb()),2&t){var r=l.pc(4);l.Db(1),l.yc("ngIf",!r.formProcess),l.Db(1),l.yc("ngIf",r.formProcess)}}function B(t,e){if(1&t&&(l.Zb(0,"div"),l.Ub(1,"ngx-paypal",78),l.Yb()),2&t){var r=l.pc(4);l.Db(1),l.yc("config",r.payPalConfig)}}var F=function(){return["/support/termsAndConditions"]};function j(t,e){if(1&t){var r=l.ac();l.Zb(0,"div",15),l.Zb(1,"form",16),l.lc("ngSubmit",(function(t){l.Oc(r);var e=l.pc(3);return e.pay(e.customStripeForm.value)})),l.Zb(2,"div",17),l.Zb(3,"div",18),l.Zb(4,"div",19),l.Zb(5,"div",20),l.Zb(6,"h3"),l.Zb(7,"strong"),l.Zc(8,"1"),l.Yb(),l.Zc(9),l.qc(10,"translate"),l.Yb(),l.Yb(),l.Zb(11,"div",21),l.Zb(12,"div",17),l.Zb(13,"div",22),l.Zb(14,"div",23),l.Zb(15,"label"),l.Zc(16),l.qc(17,"translate"),l.Yb(),l.Ub(18,"input",24),l.Yb(),l.Yb(),l.Zb(19,"div",22),l.Zb(20,"div",23),l.Zb(21,"label"),l.Zc(22),l.qc(23,"translate"),l.Yb(),l.Ub(24,"input",25),l.Yb(),l.Yb(),l.Yb(),l.Zb(25,"div",17),l.Zb(26,"div",22),l.Zb(27,"div",23),l.Zb(28,"label"),l.Zc(29),l.qc(30,"translate"),l.Yb(),l.Ub(31,"input",26),l.Yb(),l.Yb(),l.Zb(32,"div",22),l.Zb(33,"div",23),l.Zb(34,"label"),l.Zc(35),l.qc(36,"translate"),l.Yb(),l.Ub(37,"br"),l.Ub(38,"br"),l.Ub(39,"input",27),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Ub(40,"hr"),l.Zb(41,"div",20),l.Zb(42,"h3"),l.Zb(43,"strong"),l.Zc(44,"2"),l.Yb(),l.Zc(45),l.qc(46,"translate"),l.Yb(),l.Yb(),l.Zb(47,"div",28),l.Zb(48,"label",29),l.Zb(49,"div",30),l.Ub(50,"img",31),l.Ub(51,"img",32),l.Yb(),l.Zb(52,"div",33),l.Zb(53,"input",34),l.lc("click",(function(t){return l.Oc(r),l.pc(3).mostrarMetodoPago("Card")})),l.Yb(),l.Zc(54),l.qc(55,"translate"),l.Yb(),l.Yb(),l.Zb(56,"label",35),l.Ub(57,"img",36),l.Zb(58,"div",33),l.Zb(59,"input",37),l.lc("click",(function(t){return l.Oc(r),l.pc(3).mostrarMetodoPago("Paypal")})),l.Yb(),l.Zc(60),l.qc(61,"translate"),l.Yb(),l.Yb(),l.Yb(),l.Xc(62,T,50,20,"div",38),l.Yb(),l.Yb(),l.Zb(63,"div",39),l.Zb(64,"div",40),l.Zb(65,"div",41),l.Zb(66,"div",42),l.Zc(67),l.qc(68,"translate"),l.Zb(69,"span",43),l.Zc(70),l.Yb(),l.Yb(),l.Zb(71,"ul",44),l.Zb(72,"li"),l.Zc(73),l.qc(74,"translate"),l.Zb(75,"span"),l.Zc(76),l.Yb(),l.Yb(),l.Zb(77,"li"),l.Zc(78),l.qc(79,"translate"),l.Zb(80,"span"),l.Zc(81),l.Yb(),l.Yb(),l.Yb(),l.Zb(82,"ul",44),l.Zb(83,"li"),l.Zc(84),l.qc(85,"translate"),l.Zb(86,"span"),l.Zc(87),l.Yb(),l.Yb(),l.Zb(88,"li"),l.Zc(89),l.qc(90,"translate"),l.Zb(91,"span"),l.Zc(92),l.Yb(),l.Yb(),l.Yb(),l.Xc(93,M,3,2,"div",0),l.Xc(94,B,2,1,"div",0),l.Yb(),l.Yb(),l.Ub(95,"br"),l.Zb(96,"div",45),l.Zb(97,"div",46),l.Zc(98),l.qc(99,"translate"),l.Yb(),l.Ub(100,"hr",47),l.Zb(101,"div"),l.Zb(102,"div",47),l.Zb(103,"div",48),l.Zc(104),l.qc(105,"translate"),l.Yb(),l.Zb(106,"div"),l.Zc(107),l.qc(108,"translate"),l.Yb(),l.Yb(),l.Zb(109,"div",49),l.Zb(110,"div",48),l.Zc(111),l.qc(112,"translate"),l.Yb(),l.Zb(113,"div"),l.oc(),l.Zb(114,"svg",50),l.Ub(115,"path",51),l.Ub(116,"rect",52),l.Yb(),l.nc(),l.Zb(117,"span",53),l.Zc(118),l.qc(119,"translate"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Zb(120,"div",17),l.Zb(121,"div",54),l.Ub(122,"hr"),l.Zb(123,"div",55),l.Zb(124,"h5"),l.Zc(125),l.qc(126,"translate"),l.Yb(),l.Zb(127,"div",21),l.Zb(128,"ul"),l.Zb(129,"li"),l.Zc(130),l.qc(131,"translate"),l.Yb(),l.Zb(132,"li"),l.Zc(133),l.qc(134,"translate"),l.Yb(),l.Zb(135,"li"),l.Zc(136),l.qc(137,"translate"),l.Yb(),l.Yb(),l.Yb(),l.Zb(138,"p",56),l.Zb(139,"a",57),l.Zc(140),l.qc(141,"translate"),l.Yb(),l.Yb(),l.Zb(142,"p"),l.Zc(143),l.qc(144,"translate"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&t){var n=l.pc(3);l.Db(1),l.yc("formGroup",n.customStripeForm),l.Db(8),l.ad(l.rc(10,37,"tour.Ingresatusdatos")),l.Db(7),l.ad(l.rc(17,39,"tour.Nombre")),l.Db(6),l.ad(l.rc(23,41,"tour.Apellidos")),l.Db(7),l.ad(l.rc(30,43,"tour.Email")),l.Db(6),l.ad(l.rc(36,45,"tour.Tel\xe9fono")),l.Db(10),l.ad(l.rc(46,47,"tour.Formadepago")),l.Db(9),l.bd(" ",l.rc(55,49,"tour.Tarjetadecr\xe9dito")," "),l.Db(6),l.bd(" ",l.rc(61,51,"tour.PayPal")," "),l.Db(2),l.yc("ngIf",n.mostrarPagoCard),l.Db(5),l.bd(" ",l.rc(68,53,"tour.Total")," "),l.Db(3),l.cd("$ ",n.totalPagar," ",n.tour.moneda,""),l.Db(3),l.ad(l.rc(74,55,"tour.PrecioNormal")),l.Db(3),l.cd(" $ ",n.precioNormal," ",n.tour.moneda,""),l.Db(2),l.bd("",l.rc(79,57,"tour.Comision")," "),l.Db(3),l.cd("$ ",.2*n.precioNormal," ",n.tour.moneda,""),l.Db(3),l.ad(l.rc(85,59,"tour.Fechareserva")),l.Db(3),l.ad(n.fechaReserva),l.Db(2),l.ad(l.rc(90,61,"tour.Cantidad")),l.Db(3),l.bd(" ",n.cantidadTuristas,""),l.Db(1),l.yc("ngIf",n.mostrarPagoCard),l.Db(1),l.yc("ngIf",n.mostrarPagoPaypal),l.Db(4),l.bd(" ",l.rc(99,63,"tour.Reserveconconfianza"),""),l.Db(6),l.bd("",l.rc(105,65,"tour.Asistenciaglobal")," "),l.Db(3),l.ad(l.rc(108,67,"tour.Obtengarespuestas")),l.Db(4),l.bd(" ",l.rc(112,69,"tour.Reservedeformasegura"),""),l.Db(7),l.bd("",l.rc(119,71,"tour.Compraprotegida")," "),l.Db(7),l.ad(l.rc(126,73,"tour.Cancellationpolicy")),l.Db(5),l.ad(l.rc(131,75,"tour.PagoMensaje1")),l.Db(3),l.ad(l.rc(134,77,"tour.PagoMensaje2")),l.Db(3),l.ad(l.rc(137,79,"tour.PagoMensaje3")),l.Db(3),l.yc("routerLink",l.Bc(85,F)),l.Db(1),l.ad(l.rc(141,81,"tour.Pol\xedticadecancelaci\xf3n")),l.Db(3),l.ad(l.rc(144,83,"tour.CancellationpolicySub"))}}function X(t,e){if(1&t&&(l.Zb(0,"div"),l.Zb(1,"div",1),l.Zb(2,"div",2),l.Zb(3,"div",3),l.Zb(4,"div",4),l.Zb(5,"div",5),l.Zb(6,"div",6),l.Zc(7),l.qc(8,"translate"),l.Yb(),l.Zb(9,"div",7),l.Ub(10,"div",8),l.Yb(),l.Ub(11,"a",9),l.Yb(),l.Zb(12,"div",10),l.Zb(13,"div",6),l.Zc(14),l.qc(15,"translate"),l.Yb(),l.Zb(16,"div",7),l.Ub(17,"div",8),l.Yb(),l.Ub(18,"a",11),l.Yb(),l.Zb(19,"div",12),l.Zb(20,"div",6),l.Zc(21),l.qc(22,"translate"),l.Yb(),l.Zb(23,"div",7),l.Ub(24,"div",8),l.Yb(),l.Ub(25,"a",11),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Zb(26,"div",13),l.Xc(27,j,145,86,"div",14),l.Yb(),l.Yb()),2&t){var r=l.pc(2);l.Db(7),l.ad(l.rc(8,4,"tour.Search")),l.Db(7),l.ad(l.rc(15,6,"tour.Payment")),l.Db(7),l.ad(l.rc(22,8,"tour.Finish")),l.Db(6),l.yc("ngIf",!r.cargando)}}function R(t,e){if(1&t&&(l.Zb(0,"div"),l.Xc(1,X,28,10,"div",0),l.Yb()),2&t){var r=l.pc();l.Db(1),l.yc("ngIf",!r.complete)}}function L(t,e){1&t&&(l.Zb(0,"div"),l.Zb(1,"main"),l.Zb(2,"div",79),l.Zb(3,"div",2),l.Zb(4,"div",3),l.Zb(5,"div",4),l.Zb(6,"div",5),l.Zb(7,"div",6),l.Zc(8),l.qc(9,"translate"),l.Yb(),l.Zb(10,"div",7),l.Ub(11,"div",8),l.Yb(),l.Ub(12,"a",11),l.Yb(),l.Zb(13,"div",5),l.Zb(14,"div",6),l.Zc(15),l.qc(16,"translate"),l.Yb(),l.Zb(17,"div",7),l.Ub(18,"div",8),l.Yb(),l.Ub(19,"a",11),l.Yb(),l.Zb(20,"div",10),l.Zb(21,"div",6),l.Zc(22),l.qc(23,"translate"),l.Yb(),l.Zb(24,"div",7),l.Ub(25,"div",8),l.Yb(),l.Ub(26,"a",11),l.Yb(),l.Yb(),l.Zb(27,"div",80),l.Zb(28,"h4"),l.Zc(29),l.qc(30,"translate"),l.Yb(),l.Zb(31,"p",81),l.Zc(32),l.qc(33,"translate"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb()),2&t&&(l.Db(8),l.ad(l.rc(9,5,"tour.Search")),l.Db(7),l.ad(l.rc(16,7,"tour.Payment")),l.Db(7),l.ad(l.rc(23,9,"tour.Finish")),l.Db(7),l.ad(l.rc(30,11,"tour.OrdenComplete")),l.Db(3),l.bd("",l.rc(33,13,"tour.TextoConfirmaci\xf3n")," "))}var V,G=g.h.forChild([{path:"tour/:slug",pathMatch:"full",component:(V=function(){function t(e,r,n,a,i,o){var c=this;_classCallCheck(this,t),this.rutaActiva=e,this._toursService=r,this._usuarioService=n,this._PaymentService=a,this.router=i,this.route=o,this.cargando=!0,this.mostrarPagoCard=!0,this.mostrarPagoPaypal=!1,this.botondefault=!0,this.tokenStripe="",this.complete=!1,this.route.queryParams.subscribe((function(t){c.router.getCurrentNavigation().extras.state&&(c.tour=c.router.getCurrentNavigation().extras.state.tour,c.fechaReserva=c.router.getCurrentNavigation().extras.state.fecha,c.cantidadTuristas=c.router.getCurrentNavigation().extras.state.cantidadTuristas)})),this.verificarSesion()}return _createClass(t,[{key:"ngOnInit",value:function(){this.customStripeForm=new f.h({name:new f.f(null,f.A.required),lastname:new f.f(null,f.A.required),email:new f.f(null,f.A.required),telephone:new f.f(null,f.A.required),name_card:new f.f(null,f.A.required),cardNumber:new f.f(null,f.A.required),ccv:new f.f(null,f.A.required),expMonth:new f.f(null,f.A.required),expYear:new f.f(null,f.A.required)}),this.loadStripe(),this.slug={slug:this.rutaActiva.snapshot.params.slug},this.cargando=!0,this.complete=!1,this.cargarTour()}},{key:"cargarTour",value:function(){return Object(y.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._toursService.obtenerTour(this.slug.slug).subscribe((function(t){e.tour=t.Tour,e.price=e.tour.price,e.precioNormal=(e.price*e.cantidadTuristas).toFixed(2),e.totalPagar=(e.tour.priceFinal*e.cantidadTuristas).toFixed(2),e.cantidadTuristas=e.cantidadTuristas,e.initConfig(),e.cargando=!1}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"mostrarMetodoPago",value:function(t){"Card"===t&&(this.mostrarPagoCard=!0,this.mostrarPagoPaypal=!1),"Paypal"===t&&(this.mostrarPagoCard=!1,this.mostrarPagoPaypal=!0)}},{key:"loadStripe",value:function(){if(!window.document.getElementById("stripe-custom-form-script")){var t=window.document.createElement("script");t.id="stripe-custom-form-script",t.type="text/javascript",t.src="https://js.stripe.com/v2/",t.onload=function(){window.Stripe.setPublishableKey("pk_live_MFjCYjJg6B1jNNx5mUaSwFRY00q1xLT3gH")},window.document.body.appendChild(t)}}},{key:"pay",value:function(t){var e=this;window.Stripe?(this.submitted=!0,this.customStripeForm.invalid||(this.formProcess=!0,window.Stripe?(window.Stripe.card.createToken({number:t.cardNumber,exp_month:t.expMonth,exp_year:t.expYear,cvc:t.cvc},(function(t,r){e.submitted=!1,e.formProcess=!1,200===t?e.tokenStripe=r.id:(console.log("A ocurrido un error"),console.log(r.error.message),e.message=r.error.message)})),setTimeout((function(){e.creacionPago(t.name,t.lastname,t.email,t.telephone,t.cardNumber)}),1500)):alert("Oops! Stripe did not initialize properly."))):alert("Oops! Stripe did not initialize properly.")}},{key:"creacionPago",value:function(t,e,r,n,a){var i=this;if(""===this.tokenStripe||null==this.tokenStripe)return Y.a.fire({icon:"error",title:"A ocurrido un error por favor recarga la pagina",showConfirmButton:!1,timer:4500}),!1;var o=new P.a(this.usuario.id,t,e,r,n,a,this.totalPagar,this.tour.moneda,this.fechaReserva,this.cantidadTuristas,this.tokenStripe,this.tour.id,this.tour.name,this.tour.user_id);this._PaymentService.crearPagoStripe(o).subscribe((function(t){window.scroll(0,0),Y.a.fire({icon:"success",title:"Pago realizado",showConfirmButton:!1,timer:4500}),i.router.navigate(["/users/myTraverls"])}))}},{key:"initConfig",value:function(){var t=this;this.payPalConfig={currency:this.tour.moneda,clientId:"Afm-7MnAZh_K1VOBPwadYtmuSqTlUDdAlMMyrkJfFs8lIZz5RmVAGbfW7Qcaz4q3glDBfZMYUkgj6Lgf",createOrderOnClient:function(e){return{intent:"CAPTURE",purchase_units:[{amount:{currency_code:t.tour.moneda,value:t.totalPagar,breakdown:{item_total:{currency_code:t.tour.moneda,value:t.totalPagar}}},items:[{name:t.tour.name,quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:t.tour.moneda,value:t.totalPagar}}]}]}},onApprove:function(t,e){console.log("onApprove: la transacci\xf3n se aprob\xf3, pero no se autoriz\xf3",t,e),e.order.get().then((function(t){console.log("onApprove: puede obtener todos los detalles del pedido en onApprove: ",t)}))},onClientAuthorization:function(e){console.log("onClientAuthorization: probablemente deber\xeda informar a su servidor sobre la transacci\xf3n completada en este momento",e),t.sendDataPaymentPaypal(e.id,e.payer),t.showSuccess=!0},onCancel:function(t,e){console.log("OnCancel",t,e)},onError:function(t){console.log("OnError",t)},onClick:function(t,e){console.log("onClick",t,e)}}}},{key:"sendDataPaymentPaypal",value:function(t,e){var r=this,n=new P.a(this.usuario.id,e.name.given_name,e.name.surname,e.email_address,"",t,this.totalPagar,this.tour.moneda,this.fechaReserva,this.cantidadTuristas,e.payer_id,this.tour.id,this.tour.name,this.tour.user_id);this._PaymentService.crearPagoPaypal(n).subscribe((function(t){window.scroll(0,0),Y.a.fire({icon:"success",title:"Pago realizado",showConfirmButton:!1,timer:4500}),r.router.navigate(["/users/myTraverls"])}))}},{key:"verificarSesion",value:function(){var t=this;this.usuario=this._usuarioService.user,localStorage.getItem("user")||(Y.a.fire("Importante","Por favor inicia sesi\xf3n para continuar","warning"),setTimeout((function(){t.router.navigate(["/login"])}),4e3))}}]),t}(),V.\u0275fac=function(t){return new(t||V)(l.Tb(g.a),l.Tb(h.m),l.Tb(h.n),l.Tb(h.f),l.Tb(g.d),l.Tb(g.a))},V.\u0275cmp=l.Nb({type:V,selectors:[["app-payment"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"hero_in","cart_section","start_bg_zoom"],[1,"wrapper"],[1,"container"],[1,"bs-wizard","clearfix"],[1,"bs-wizard-step"],[1,"text-center","bs-wizard-stepnum"],[1,"progress"],[1,"progress-bar"],["href","cart-1.html",1,"bs-wizard-dot"],[1,"bs-wizard-step","active"],[1,"bs-wizard-dot"],[1,"bs-wizard-step","disabled"],[1,"bg_color_1"],["class","container margin_60_35",4,"ngIf"],[1,"container","margin_60_35"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-8"],[1,"box_cart"],[1,"form_title"],[1,"step"],[1,"col-sm-6"],[1,"form-group"],["type","text","formControlName","name","required","",1,"form-control"],["type","text","formControlName","lastname","required","",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","telephone","required","",1,"form-control"],[1,"payment-method"],["for","card",1,"method","card"],[1,"card-logos"],["src","https://designmodo.com/demo/checkout-panel/img/visa_logo.png"],["src","https://designmodo.com/demo/checkout-panel/img/mastercard_logo.png"],[1,"radio-input"],["id","card","type","radio","checked","","name","payment",3,"click"],["for","paypal",1,"method","paypal"],["src","https://designmodo.com/demo/checkout-panel/img/paypal_logo.png"],["id","imagenpaypal","type","radio","name","payment","required","",3,"click"],["class","step",4,"ngIf"],["id","sidebar",1,"col-lg-4",2,"position","relative","overflow","visible","box-sizing","border-box","min-height","1px"],[1,"theiaStickySidebar",2,"padding-top","0px","padding-bottom","1px","position","static","transform","none"],[1,"box_detail"],["id","total_cart"],[1,"float-right"],[1,"cart_details"],[1,"d-none","d-lg-block"],[1,"h3","pt-5","mb-0","font-weight-medium"],[1,"my-3"],[1,"h6","mb-0","font-weight-bold"],[1,"mt-3"],["width","18","height","18","aria-hidden","true","role","img","viewBox","0 0 24 24",1,"mr-1","fill-gray-700"],["d","M18.5 9H17V7A5 5 0 007 7v2H5.5A1.5 1.5 0 004 10.5v10A1.5 1.5 0 005.5 22h13a1.5 1.5 0 001.5-1.5v-10A1.5 1.5 0 0018.5 9zm-10-2a3.5 3.5 0 017 0v2h-7zm10 13.5h-13v-10h13z"],["x","11","y","13","width","2","height","5","rx","1","ry","1"],[1,"align-middle"],[1,"col-sm","8"],["id","policy"],[1,"nomargin"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"panel","panel-default"],["type","text","formControlName","name_card",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"col-md-6","col-sm-12"],["type","text","formControlName","cardNumber","placeholder","Valid Card Number","name","cardNumber","maxlength","18",1,"form-control"],["src","assets/img/cards_all.svg","alt","Cards","required","",1,"cards-payment"],[1,"col-md-6"],["type","text","formControlName","expMonth","placeholder","MM","minlength","2","maxlength","2","max","12",1,"form-control"],["type","text","formControlName","expYear","placeholder","YYYY","minlength","4","maxlength","4","max","2030","min","2019",1,"form-control"],[1,"col-md-12"],[1,"col-4"],["type","text","formControlName","ccv","placeholder","CCV","minlength","3","maxlength","4",1,"form-control"],[1,"col-8"],["src","assets/img/icon_ccv.gif","width","50","height","29","alt","ccv"],[1,"col","sm-6"],[1,"text-danger"],["type","submit","class","btn_1 full-width purchase",3,"value",4,"ngIf"],["class","btn_1 full-width purchase",4,"ngIf"],["type","submit",1,"btn_1","full-width","purchase",3,"value"],[1,"btn_1","full-width","purchase"],[3,"config"],[1,"hero_in","cart_section","last","start_bg_zoom"],["id","confirm"],[2,"text-align","center","margin-top","36px"]],template:function(t,e){1&t&&(l.Xc(0,w,2,0,"div",0),l.Ub(1,"br"),l.Ub(2,"br"),l.Ub(3,"br"),l.Xc(4,R,2,1,"div",0),l.Xc(5,L,34,15,"div",0)),2&t&&(l.yc("ngIf",e.cargando),l.Db(4),l.yc("ngIf",!e.cargando),l.Db(1),l.yc("ngIf",e.complete))},directives:[s.o,C.a,f.r,f.i,f.c,f.q,f.g,f.y,g.g,g.f,f.l,f.m,m],pipes:[c.c],styles:[".payment-method[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin:25px;-webkit-box-pack:justify;justify-content:space-between}.method[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:382px;height:122px;padding-top:20px;cursor:pointer;border:1px solid transparent;border-radius:2px;background-color:#f9f9f9;-webkit-box-pack:center;justify-content:center}.card-logos[_ngcontent-%COMP%], .method[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.card-logos[_ngcontent-%COMP%]{width:150px;-webkit-box-pack:justify;justify-content:space-between}.radio-input[_ngcontent-%COMP%]{margin-top:20px}input[type=radio][_ngcontent-%COMP%]{display:inline-block}.paypal-button[_ngcontent-%COMP%]   .paypal-button-card[_ngcontent-%COMP%], .paypal-powered-by[_ngcontent-%COMP%]{display:none!important}"]}),V)}]),Q=r("UGvr");r.d(e,"PaymentModule",(function(){return H}));var W,H=((W=function t(){_classCallCheck(this,t)}).\u0275mod=l.Rb({type:W}),W.\u0275inj=l.Qb({factory:function(t){return new(t||W)},imports:[[s.c,f.k,f.x,h.a,Q.a,c.b,v,G]]}),W)}}]);